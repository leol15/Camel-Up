<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8">
	<title>bug?</title>
</head>
<body>

	<ul>
		<li><button onclick="startNewGame()">Start Game</button></li>
		<li><button onclick="gameAction('uname&uname=oreo')">Create Name</button></li>
		<li><button onclick="gameAction('camels')">Check Camels</button></li>
		<li><button onclick="gameAction('dice')">Check Dice</button></li>
		<li><button onclick="gameAction('players')">Check Players</button></li>
		<li><button onclick="gameAction('roll')">Roll</button></li>
		<li><button onclick="gameAction('uname&uname=oleo')">Chenge Name</button></li>
		<li><button onclick="">Button 7</button></li>
	</ul>
	<div>
		<p id="result"></p>
	</div>

	<script type="text/javascript">
		// constants
		let host = window.location.host + "/"
		let DISPLAY = document.getElementById('result');
		let GAME_ROUTE = "/game"
		let CREATE_GAME_ROUTE = "/create"

		// return a promise, use then
		function fetch_url(url) {
			console.log("fetching [" + url + "]")
			return fetch(url).then(res => res.text())
				.then(text => {
					console.log("v.v.v.v.v")
					console.log(text);
					console.log("^.^.^.^.^")
					return text;	
				})
				.catch(err => console.log(err));
		}

		var gameID;
		function startNewGame() {
			fetch_url(CREATE_GAME_ROUTE)
				.then(text => {
					DISPLAY.innerHTML += "<br>" + text;
					gameID = text;
				});
		}

		function gameAction(action) {
			fetch_url(GAME_ROUTE + "/" + gameID + "?action=" + action)
				.then(text => DISPLAY.innerHTML += "<br>" + text);
		}



	</script>
</body>
</html>